(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ace400e"],{"072d9":function(e,t,a){"use strict";a("3840")},"15d8":function(e,t,a){},"225f":function(e,t,a){"use strict";a("15d8")},"333d":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},n=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,i){return e/=i/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var i=l(),n=e-i,s=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=s;var l=Math.easeInOutQuad(c,i,n,t);r(l),c<t?o(e):a&&"function"===typeof a&&a()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,d=(a("225f"),a("2877")),m=Object(d["a"])(u,i,n,!1,null,"4656909a",null);t["a"]=m.exports},3840:function(e,t,a){},6724:function(e,t,a){"use strict";a("8d41");var i="@@wavesContext";function n(e,t){function a(a){var i=Object.assign({},t.value),n=Object.assign({ele:e,type:"hit",color:"rgba(0, 0, 0, 0.15)"},i),o=n.ele;if(o){o.style.position="relative",o.style.overflow="hidden";var r=o.getBoundingClientRect(),l=o.querySelector(".waves-ripple");switch(l?l.className="waves-ripple":(l=document.createElement("span"),l.className="waves-ripple",l.style.height=l.style.width=Math.max(r.width,r.height)+"px",o.appendChild(l)),n.type){case"center":l.style.top=r.height/2-l.offsetHeight/2+"px",l.style.left=r.width/2-l.offsetWidth/2+"px";break;default:l.style.top=(a.pageY-r.top-l.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",l.style.left=(a.pageX-r.left-l.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return l.style.backgroundColor=n.color,l.className="waves-ripple z-active",!1}}return e[i]?e[i].removeHandle=a:e[i]={removeHandle:a},a}var o={bind:function(e,t){e.addEventListener("click",n(e,t),!1)},update:function(e,t){e.removeEventListener("click",e[i].removeHandle,!1),e.addEventListener("click",n(e,t),!1)},unbind:function(e){e.removeEventListener("click",e[i].removeHandle,!1),e[i]=null,delete e[i]}},r=function(e){e.directive("waves",o)};window.Vue&&(window.waves=o,Vue.use(r)),o.install=r;t["a"]=o},"8d41":function(e,t,a){},e382:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"关键词",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.listQuery.UserName,callback:function(t){e.$set(e.listQuery,"UserName",t)},expression:"listQuery.UserName"}}),a("el-select",{staticClass:"filter-item",staticStyle:{width:"90px"},attrs:{placeholder:"状态",clearable:""},model:{value:e.listQuery.UserStatus,callback:function(t){e.$set(e.listQuery,"UserStatus",t)},expression:"listQuery.UserStatus"}},e._l(e.statusOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" 查询 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.handleAction(null,"create")}}},[e._v(" 新增 ")]),a("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{loading:e.downloadLoading,type:"primary",icon:"el-icon-download"},on:{click:e.handleDownload}},[e._v(" 导出 ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":"",height:"72vh","header-cell-style":{"background-color":"rgba(245,245,245)"}},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"80"}}),a("el-table-column",{attrs:{label:"用户名","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleAction(i,"detail")}}},[e._v(e._s(i.UserName))])]}}])}),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.RealName))])]}}])}),a("el-table-column",{attrs:{label:"监理单位"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.CompanyName))])]}}])}),a("el-table-column",{attrs:{label:"手机号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[e._v(e._s(i.Mobile))])]}}])}),a("el-table-column",{attrs:{label:"状态","class-name":"status-col"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-tag",{attrs:{type:e._f("statusFilter")(i.UserStatus)}},[e._v(" "+e._s(e.statusOptions[i.UserStatus])+" ")])]}}])}),a("el-table-column",{attrs:{label:"创建时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("span",[e._v(e._s(i.BaseCreateTime))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,n=t.$index;return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleAction(i,"update")}}},[e._v(" 编辑 ")]),"1"==i.UserStatus?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.handleModifyStatus(i,"0")}}},[e._v(" 禁用 ")]):e._e(),"0"==i.UserStatus?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleModifyStatus(i,"1")}}},[e._v(" 启用 ")]):e._e(),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleDelete(i,n)}}},[e._v(" 删除 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.PageIndex,limit:e.listQuery.PageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"PageIndex",t)},"update:limit":function(t){return e.$set(e.listQuery,"PageSize",t)},pagination:e.getList}}),a("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"dataForm",attrs:{rules:e.rules,model:e.temp,"label-position":"right","label-width":"80px"}},[a("el-row",{staticStyle:{width:"100%"},attrs:{gutter:0}},[a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"用户名",prop:"UserName"}},[a("el-input",{attrs:{readonly:"detail"===e.dialogStatus},model:{value:e.temp.UserName,callback:function(t){e.$set(e.temp,"UserName",t)},expression:"temp.UserName"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"Password"}},[a("el-input",{attrs:{type:"password",readonly:"detail"===e.dialogStatus,minlength:"6","show-word-limit":"","show-password":""},model:{value:e.temp.Password,callback:function(t){e.$set(e.temp,"Password",t)},expression:"temp.Password"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"RealName"}},[a("el-input",{attrs:{readonly:"detail"===e.dialogStatus},model:{value:e.temp.RealName,callback:function(t){e.$set(e.temp,"RealName",t)},expression:"temp.RealName"}})],1),a("el-form-item",{attrs:{label:"生日",prop:"Birthday"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"detail"!==e.dialogStatus?"选择日期":"",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",readonly:"detail"===e.dialogStatus},model:{value:e.temp.Birthday,callback:function(t){e.$set(e.temp,"Birthday",t)},expression:"temp.Birthday"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"Email"}},[a("el-input",{attrs:{readonly:"detail"===e.dialogStatus},model:{value:e.temp.Email,callback:function(t){e.$set(e.temp,"Email",t)},expression:"temp.Email"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"Remark"}},[a("el-input",{attrs:{placeholder:"detail"!==e.dialogStatus?"请输入内容":"",maxlength:"30","show-word-limit":"",readonly:"detail"===e.dialogStatus},model:{value:e.temp.Remark,callback:function(t){e.$set(e.temp,"Remark",t)},expression:"temp.Remark"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"DepartmentId"}},["detail"===e.dialogStatus?a("el-input",{attrs:{readonly:""},model:{value:e.temp.DepartmentId,callback:function(t){e.$set(e.temp,"DepartmentId",t)},expression:"temp.DepartmentId"}}):a("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:"detail"!==e.dialogStatus?"请选择":"",clearable:""},model:{value:e.temp.DepartmentId,callback:function(t){e.$set(e.temp,"DepartmentId",t)},expression:"temp.DepartmentId"}},e._l(e.departments,(function(e,t){return a("el-option",{key:t,attrs:{label:e.DepartmentName,value:e.Id}})})),1)],1),"监理人员"==e.currentRoleName||"管理人员"==e.currentRoleName?a("el-form-item",{attrs:{label:"岗位",prop:"PositionIds"}},["detail"===e.dialogStatus?a("el-input",{attrs:{readonly:""},model:{value:e.temp.PositionIds,callback:function(t){e.$set(e.temp,"PositionIds",t)},expression:"temp.PositionIds"}}):a("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:"detail"!==e.dialogStatus?"请选择":"",clearable:""},model:{value:e.temp.PositionIds,callback:function(t){e.$set(e.temp,"PositionIds",t)},expression:"temp.PositionIds"}},e._l(e.Posts,(function(e){return a("el-option",{key:e.DictKey,attrs:{label:e.DictValue,value:e.DictKey}})})),1)],1):e._e()],1),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"头像",prop:"Portrait"}},[a("el-upload",{ref:"portraitUploader",staticClass:"avatar-uploader",attrs:{disabled:"detail"===e.dialogStatus,"list-type":"picture-card",action:e.uploadUrl,name:"file",limit:1,headers:e.headers,"show-file-list":!1,"auto-upload":!0,"on-preview":e.handlePreview,"on-success":e.handlePortraitSuccess,"on-error":e.handlePortraitError,"on-change":e.handlePortraitChange,"before-upload":e.beforeAvatarUpload,"before-remove":e.beforeRemove,"on-remove":e.handleRemove,"on-exceed":e.handleExceed}},[e.temp.PortraitUrl?a("el-image",{staticClass:"avatar",attrs:{src:e.temp.PortraitUrl}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]):"detail"===e.dialogStatus?a("i",{staticClass:"el-icon-picture-outline avatar-uploader-icon"}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),a("el-form-item",{attrs:{label:"性别",prop:"Gender"}},["detail"===e.dialogStatus?a("el-input",{attrs:{readonly:""},model:{value:e.temp.Gender,callback:function(t){e.$set(e.temp,"Gender",t)},expression:"temp.Gender"}}):a("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{placeholder:"detail"!==e.dialogStatus?"请选择":"",clearable:""},model:{value:e.temp.Gender,callback:function(t){e.$set(e.temp,"Gender",t)},expression:"temp.Gender"}},e._l(e.genderOptions,(function(e,t){return a("el-option",{key:e,attrs:{label:e,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"手机号",prop:"Mobile"}},[a("el-input",{attrs:{readonly:"detail"===e.dialogStatus,maxlength:"11","show-word-limit":""},model:{value:e.temp.Mobile,callback:function(t){e.$set(e.temp,"Mobile",t)},expression:"temp.Mobile"}})],1),a("el-form-item",{attrs:{label:"状态",prop:"UserStatus"}},[a("el-radio-group",{attrs:{size:"normal",disabled:"detail"==e.dialogStatus},model:{value:e.temp.UserStatus,callback:function(t){e.$set(e.temp,"UserStatus",t)},expression:"temp.UserStatus"}},e._l(e.statusOptions,(function(t,i){return a("el-radio",{key:i,attrs:{label:i}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("el-form-item",{attrs:{label:"角色",prop:"RoleIds"}},[a("el-radio-group",{attrs:{size:"normal",disabled:"detail"==e.dialogStatus},on:{change:e.roleChanged},model:{value:e.temp.RoleIds,callback:function(t){e.$set(e.temp,"RoleIds",t)},expression:"temp.RoleIds"}},e._l(e.roles,(function(t,i){return a("el-radio",{key:i,attrs:{label:t.Id}},[e._v(" "+e._s(t.RoleName)+" ")])})),1)],1),"监管部门"!=e.currentRoleName?a("el-form-item",{attrs:{label:"监理单位",prop:"CompanyName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearch,"value-key":"CompanyName",placeholder:"detail"!==e.dialogStatus?"请输入监理单位名称":"","trigger-on-focus":!1,clearable:"","suffix-icon":"el-icon-search",readonly:"detail"===e.dialogStatus},on:{select:e.handleSelect},model:{value:e.temp.CompanyName,callback:function(t){e.$set(e.temp,"CompanyName",t)},expression:"temp.CompanyName"}})],1):e._e()],1)],1)],1),"detail"!==e.dialogStatus?a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(" 取消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){"create"===e.dialogStatus?e.createData():e.updateData()}}},[e._v(" 确认 ")])],1):e._e()],1)],1)},n=[],o=a("5530"),r=(a("7db0"),a("d81d"),a("4de4"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("b0c0"),a("b775")),l=a("61f7"),s=a("2f62"),c=a("5f87"),u=a("c24f"),d=a("cc5e"),m=a("fcac");function p(e){return Object(r["b"])({url:"/Department/GetList",method:"get",params:e})}var f=a("3f5e"),h=a("6724"),g=a("ed08"),b=a("333d"),v={name:"RoleIndex",components:{Pagination:b["a"]},directives:{waves:h["a"]},filters:{statusFilter:function(e){var t=["info","success"];return t[e]}},computed:Object(o["a"])({},Object(s["b"])(["dicts"])),data:function(){return{headers:{Authorization:"Bearer "+Object(c["b"])()},uploadUrl:"",currentRoleName:"",roles:[],Posts:[],companys:[],departments:[],defaultProps:{children:"children",label:"MenuName"},tableKey:0,list:null,total:0,listLoading:!0,listQuery:{UserName:void 0,Mobile:void 0,UserStatus:void 0,DepartmentId:void 0,PageIndex:1,PageSize:20},statusOptions:["禁用","启用"],genderOptions:["未知","女","男"],temp:{Id:0,UserName:"",Email:"",Birthday:"",OrganizationCode:"",CompanyName:"",Password:"",RealName:"",Gender:0,Portrait:"",PortraitUrl:"",Remark:"",PositionIds:"",UserStatus:1,Mobile:"",DepartmentId:""},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"角色编辑",create:"角色新增",detail:"角色详情"},rules:{UserName:[{required:!0,message:"角色名称必填",trigger:"blur"}],Password:[{required:!0,trigger:"blur",validator:function(e,t,a){t.length<6?a(new Error("密码不能少于6位")):a()}}],Mobile:[{required:!1,message:"手机号格式不正确",trigger:"blur",validator:function(e,t,a){t&&!Object(l["g"])(t)?a(new Error("请输入正确的手机号")):a()}}],Email:[{required:!1,trigger:"blur",validator:function(e,t,a){t&&!Object(l["d"])(t)?a(new Error("邮箱格式不正确。")):a()}}]},downloadLoading:!1}},created:function(){this.uploadUrl=r["a"]+"/File/UploadImg";var e=this.dicts.find((function(e){return"Post"==e.DictType}));e&&(this.Posts=e.Detail),this.getList()},methods:{getPostName:function(e){var t=this.Posts.find((function(t){return t.DictKey==e}));return t?t.DictValue:""},getList:function(){var e=this;this.listLoading=!0,Object(u["d"])(this.listQuery).then((function(t){e.list=t.Data.map((function(e){return e.RoleIds||(e.RoleIds=null),e})),e.total=t.Total,e.listLoading=!1})).catch((function(t){e.listLoading=!1}))},handleFilter:function(){this.listQuery.PageIndex=1,this.getList()},handleModifyStatus:function(e,t){var a=this,i=Object.assign({},e);i.UserStatus=t,Object(u["h"])(i).then((function(){a.getList(),a.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3})})).catch((function(e){a.$message({title:"失败",message:"操作失败",type:"error"})}))},sortChange:function(e){var t=e.prop,a=e.order;"id"===t&&this.sortByID(a)},sortByID:function(e){this.listQuery.sort="ascending"===e?"+id":"-id",this.handleFilter()},resetTemp:function(){this.temp={Id:0,UserName:"",Password:"",RealName:"",Gender:0,Birthday:"",Email:"",PositionIds:"",Remark:"",OrganizationCode:"",CompanyName:"",UserStatus:1,Mobile:"",Portrait:"",PortraitUrl:"",DepartmentId:""}},addMenuChildren:function(e,t){e&&e.length>0&&(e=e.map((function(e){var a=t.filter((function(t){return t.ParentId==e.Id}));return a&&a.length>0&&(e.children=a),e})))},querySearch:function(e,t){Object(m["b"])({CompanyName:e}).then((function(e){var a=e.Data;t(a)})).catch((function(e){t([])}))},handleSelect:function(e){this.temp.OrganizationCode=e.OrganizationCode,this.temp.CompanyName=e.CompanyName},getBaseDatas:function(){var e=this;return new Promise((function(t,a){var i=[],n=[];e.roles.length<1&&(i.push(Object(d["b"])({})),n.push("roles")),e.departments.length<1&&(i.push(p({})),n.push("departments")),i.length<1?t():Promise.all(i).then((function(a){for(var i=0;i<a.length;i++){var o=a[i].Data;e[n[i]]=o}t()})).catch((function(e){a(e)}))}))},handleAction:function(e,t){var a=this;this.getBaseDatas().then((function(){if(e)if(e.Portrait){var i={IdS:"".concat(e.Portrait)};console.log("data",i),Object(f["a"])(i).then((function(i){var n=i.Data;if(a.temp=Object.assign({},e),a.roleChanged(a.temp.RoleIds),n&&n.length>0){var o=n.find((function(t){return t.Id==e.Portrait})).FileId;a.$set(a.temp,"PortraitUrl",r["a"]+"/"+o)}a.dialogStatus=t,a.dialogFormVisible=!0,a.$nextTick((function(){a.$refs["dataForm"].clearValidate()}))})).catch()}else a.temp=Object.assign({},e),a.roleChanged(a.temp.RoleIds),a.$set(a.temp,"PortraitUrl",""),a.dialogStatus=t,a.dialogFormVisible=!0,a.$nextTick((function(){a.$refs["dataForm"].clearValidate()}));else a.currentRoleName="",a.resetTemp(),a.dialogStatus=t,a.dialogFormVisible=!0,a.$nextTick((function(){a.$refs["dataForm"].clearValidate()}))}))},saveImg:function(e){return!e.createSavedImg&&e.PortraitFileId?new Promise((function(t,a){Promise.all([Object(f["c"])({Id:0,FileId:e.PortraitFileId,FileType:2,FileName:e.PortraitFileName,FileSize:e.PortraitFileSize})]).then((function(a){console.log("准备工作完毕1"),console.log(a),e.Portrait=a[0].Data,e.createSavedImg=!0,t(e)})).catch((function(){a()}))})):new Promise((function(t,a){console.log("准备工作完毕0"),t(e)}))},createData:function(){var e=this;this.$refs["dataForm"].validate((function(t){t&&e.saveImg(e.temp).then((function(t){Object(u["h"])(e.temp).then((function(){e.getList(),e.dialogFormVisible=!1,e.$notify({title:"成功",message:"新增成功！",type:"success",duration:2e3})})).catch((function(t){e.$notify({title:"失败",message:"新增失败！",type:"error",duration:2e3})}))}))}))},updateData:function(){var e=this;this.$refs["dataForm"].validate((function(t){if(t){var a=Object.assign({},e.temp);e.saveImg(a).then((function(t){Object(u["h"])(a).then((function(){e.getList(),e.dialogFormVisible=!1,e.$notify({title:"成功",message:"操作成功！",type:"success",duration:2e3})})).catch((function(t){e.$notify({title:"失败",message:"操作失败！",type:"error",duration:2e3})}))}))}}))},handlePortraitSuccess:function(e,t){this.temp.PortraitUrl=URL.createObjectURL(t.raw),this.temp.PortraitFileId=e.Data,this.temp.PortraitFileName=t.name,this.temp.PortraitFileSize=t.size,this.$refs.portraitUploader.clearFiles(),console.log("handlePortraitSuccess.res",e),console.log("handlePortraitSuccess.file",t),console.log("temp",this.temp)},handlePortraitError:function(e,t,a){},handlePortraitChange:function(e,t){},handlePreview:function(e){console.log(e),this.dialogImageUrl=e.url,this.dialogVisible=!0},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleRemove:function(e,t){console.log(e,t)},handleExceed:function(e,t){console.log(e,t)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},handleDelete:function(e,t){var a=this;this.$confirm("此操作将删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(t){Object(u["c"])({Ids:e.Id}).then((function(e){a.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),a.getList()})).catch((function(e){a.$notify({title:"失败",message:"删除失败！",type:"error",duration:2e3})}))})).catch((function(e){}))},roleChanged:function(e){if(e)switch(this.currentRoleName=this.roles.find((function(t){return t.Id==e})).RoleName,this.currentRoleName){case"管理人员":break;case"监管部门":this.temp.OrganizationCode="",this.temp.CompanyName="",this.temp.PositionIds="";break;case"监理单位":this.temp.PositionIds="";break;case"监理人员":break}},handleDownload:function(){var e=this;this.downloadLoading=!0,Promise.all([a.e("chunk-0143048a"),a.e("chunk-2133cd4f")]).then(a.bind(null,"4bf8")).then((function(t){var a=["单位名称","注册地址","联系人","在监项目数","监理人数","状态"],i=["CompanyName","RegisteredAddr","Contacts","ProjectCount","SupervisorCount","Status"],n=e.formatJson(i);t.export_json_to_excel({header:a,data:n,filename:"监理单位列表"}),e.downloadLoading=!1}))},formatJson:function(e){return this.list.map((function(t){return e.map((function(e){return"timestamp"===e?Object(g["d"])(t[e]):t[e]}))}))}}},y=v,w=(a("072d9"),a("2877")),S=Object(w["a"])(y,i,n,!1,null,"65bb2e68",null);t["default"]=S.exports},fcac:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return l}));var i=a("b775");function n(e){return Object(i["b"])({url:"/SuperviseCompany/GetList",method:"get",params:e})}function o(e){return Object(i["b"])({url:"/SuperviseCompany/GetPageList",method:"get",params:e})}function r(e){return Object(i["b"])({url:"/SuperviseCompany/SaveForm",method:"post",data:e})}function l(e){return Object(i["b"])({url:"/SuperviseCompany/DeleteForm",method:"post",data:e})}}}]);
//# sourceMappingURL=chunk-4ace400e.abb5249b.js.map